{"version":3,"sources":["../../server/js/loading.js"],"names":[],"mappings":"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","file":"loading.js","sourcesContent":["import $ from \"jquery\";\nimport moment from \"moment\";\n\nlet local;\n\nif(document.domain === \"localhost\"){\n  local = `${document.location.host}`;\n}\n\nlet socket = io(local||`${document.domain}:8000`, { 'sync disconnect on unload': true, 'transports': [\"websocket\"] });\nlet semicolonIndex = document.cookie.indexOf(\";\", (document.cookie.match(\"waitTime\").index + 9));\nlet time;\nif(semicolonIndex === -1){\n  time = document.cookie.substring((document.cookie.match(\"waitTime\").index + 9));\n}\nelse {\n  time = document.cookie.substring((document.cookie.match(\"waitTime\").index + 9), semicolonIndex);\n}\nlet number = 0;\nlet fullSize = 100;\nlet endTime;\nlet startTime;\nlet difference;\nlet doOnce = true;\nlet name;\n\nsocket.on(\"time\", (data) => {\n  if(doOnce){\n    doOnce = false;\n    let firstSlash = document.location.pathname.indexOf(\"/\", 1) + 1;\n    let lastSlash = document.location.pathname.indexOf(\"/\", firstSlash);\n    name = document.location.pathname.substring(firstSlash, lastSlash);\n    socket.emit(\"name\", { name: name });\n  }\n  number++;\n  if((fullSize * (((time/1000) - ((time/1000) - number))/(time/1000))) < 100){\n    $(\"img\").css(\"width\", (fullSize * (((time/1000) - ((time/1000) - number))/(time/1000))).toString() + \"%\");\n    $(\".waitTime\").html(\"Estimated time remaining: \" + moment.duration(((time/1000) - number) * 1000).humanize());\n  }\n  else {\n    $(\"img\").css(\"width\", \"100%\");\n    $(\".waitTime\").html(\"Estimated time remaining: 0 seconds\");\n  }\n  socket.emit(\"time\", { time: new Date().toTimeString() });\n});\n\nsocket.on(\"data\", (data) => {\n  socket.disconnect();\n  if(typeof data === \"string\"){\n    return window.location.href = data;\n  }\n  $(\".form\").append(`<textarea name='data'>${JSON.stringify(data.data)}</textarea>`);\n  $(\".form\").trigger(\"submit\");\n});\n"]}